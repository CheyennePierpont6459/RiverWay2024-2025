<!-- admin_base.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cave Country Canoes - Admin Dashboard</title>
  <style>
    /* ==============================
       Base / Global Styles
       ============================== */

    /* Reset & Box Sizing */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    /* Body as Flex Container */
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      font-family: Arial, sans-serif;
      background-color: #f4f6f9;
    }

    /* ==============================
       Navbar / Header
       ============================== */

    .navbar {
      background-color: #2c3e50;
      overflow: hidden;
      display: flex;
      align-items: center;
      padding: 0 20px;
    }

    .navbar a {
      color: #ecf0f1;
      padding: 14px 20px;
      text-decoration: none;
      text-align: center;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .navbar a:hover {
      background-color: #34495e;
      color: white;
    }

    /* Logout Button Styling */
    .navbar form {
      margin-left: auto; /* Pushes the form to the right */
    }

    .navbar button {
      background-color: transparent;
      border: none;
      color: #ecf0f1;
      padding: 14px 20px;
      font-size: 17px;
      cursor: pointer;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .navbar button:hover {
      background-color: #34495e;
      color: white;
    }

    /* ==============================
       Main Content Container
       ============================== */

    .container {
      flex: 1; /* Allows the container to grow and fill available space */
      padding: 20px;
    }

    /* ==============================
       Flash Messages
       ============================== */

    .flash {
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 4px;
      font-weight: bold;
    }

    .flash-success {
      background-color: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .flash-error {
      background-color: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .flash-info {
      background-color: #cce5ff;
      color: #004085;
      border: 1px solid #b8daff;
    }

    /* ==============================
       Footer
       ============================== */

    .footer {
      background-color: #2c3e50;
      color: #ecf0f1;
      text-align: center;
      padding: 15px 20px;
      font-size: 0.9rem;
    }

    /* Optional: Ensure footer text doesn't wrap awkwardly */
    .footer p {
      margin: 0;
    }

    /* ==============================
       Responsive Design
       ============================== */

    @media (max-width: 768px) {
      .navbar a, .navbar button {
        padding: 10px 15px;
        font-size: 15px;
      }

      .container {
        padding: 15px;
      }

      .footer {
        padding: 10px 15px;
        font-size: 0.8rem;
      }
    }
  </style>

  <!-- Provide the session token to JavaScript -->
  <script>
    const SESSION_TOKEN = "{{ session_token }}";
  </script>

  {% block head %}{% endblock %}
</head>
<body>
  <!-- Navigation Bar -->
  <div class="navbar">
    {% if current_user.is_authenticated %}
      <a href="{{ url_for('admin_home', st=session_token) }}">Home</a>
      <a href="{{ url_for('admin_manage_staff', st=session_token) }}">Manage Staff</a>
      <a href="{{ url_for('admin_manage_emergencies', st=session_token) }}">Manage Emergencies</a>
      <a href="{{ url_for('admin_chat', st=session_token) }}">Chat</a>
      <form action="{{ url_for('logout', st=session_token) }}" method="POST">
        <button type="submit">Logout</button>
      </form>
    {% else %}
      <a href="{{ url_for('login_page') }}">Login</a>
      <a href="{{ url_for('signup_page') }}">Sign Up</a>
    {% endif %}
  </div>

  <!-- Main Content Container -->
  <div class="container">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash flash-{{ category }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}
  </div>

  <!-- Footer -->
  <div class="footer">
    <p id="footer-text">&copy; <span id="current-year"></span> CCC Emergency Map. All rights reserved.</p>
  </div>

  <script>
    // Get the current year
    const current_year = new Date().getFullYear();

    // Insert the year into the DOM
    document.getElementById("current-year").textContent = current_year;
</script>

  {% block scripts %}{% endblock %}
  <!-- Link to the shared script.js -->
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>